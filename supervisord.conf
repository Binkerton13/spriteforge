[supervisord]
nodaemon=true
user=app
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid

[program:comfyui]
command=/bin/bash -c "source %(ENV_VIRTUAL_ENV)s/bin/activate && if [ -d /workspace/comfyui ]; then cd /workspace/comfyui; else cd /opt/comfyui; fi && python main.py --listen 0.0.0.0 --port %(ENV_PORT)s"
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=10

[program:filebrowser]
command=/bin/bash -c "source %(ENV_VIRTUAL_ENV)s/bin/activate && python /usr/local/bin/file_browser.py"
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=FILE_BROWSER_PORT="8080",WORKSPACE="%(ENV_WORKSPACE)s"
